# ASP.NET Core Project Structure

A well-organized project structure is crucial for maintainability. ASP.NET Core follows conventions that, once understood, make navigating any project intuitive.

---

## Section 1: Project Basics

### Standard Project Layout

When you create a new Web API project with `dotnet new webapi`, you get:

```
MyWebApi/
├── Controllers/
│   └── WeatherForecastController.cs
├── Properties/
│   └── launchSettings.json
├── appsettings.json
├── appsettings.Development.json
├── Program.cs
├── MyWebApi.csproj
└── WeatherForecast.cs
```

<ProjectStructureExplorer mode="intermediate" />

### File Purposes

| File/Folder | Purpose |
|:------------|:--------|
| `Program.cs` | Application entry point, service registration, middleware |
| `appsettings.json` | Configuration (connection strings, settings) |
| `appsettings.{Environment}.json` | Environment-specific overrides |
| `*.csproj` | Project definition, dependencies, build settings |
| `Properties/launchSettings.json` | Development launch profiles |
| `Controllers/` | API endpoint handlers |

### Environment-Specific Configuration

ASP.NET Core automatically loads configuration based on environment:

```
appsettings.json                    ← Always loaded (base settings)
appsettings.Development.json        ← Loaded in Development
appsettings.Production.json         ← Loaded in Production
```

<ProgressCheckpoint section="project-basics" xpReward={12} />

---

## Section 2: Project Structure Deep Dive

### Program.cs - The Heart of Your App

Modern .NET uses **top-level statements** and the minimal hosting model:

```csharp
var builder = WebApplication.CreateBuilder(args);

// 1. Register services (Dependency Injection)
builder.Services.AddControllers();
builder.Services.AddEndpointsApiExplorer();
builder.Services.AddSwaggerGen();
builder.Services.AddDbContext<AppDbContext>(options =>
    options.UseSqlServer(builder.Configuration.GetConnectionString("Default")));

var app = builder.Build();

// 2. Configure middleware pipeline (order matters!)
if (app.Environment.IsDevelopment())
{
    app.UseSwagger();
    app.UseSwaggerUI();
}

app.UseHttpsRedirection();
app.UseAuthentication();
app.UseAuthorization();
app.MapControllers();

app.Run();
```

### appsettings.json Structure

Hierarchical configuration in JSON format:

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "DefaultConnection": "Server=localhost;Database=MyDb;Trusted_Connection=true"
  },
  "Jwt": {
    "Secret": "your-secret-key",
    "Issuer": "your-app",
    "ExpirationMinutes": 60
  }
}
```

### Common Folder Conventions

| Folder | Purpose | Example |
|:-------|:--------|:--------|
| `Controllers/` | API endpoints | `UsersController.cs` |
| `Models/` | DTOs, view models | `UserDto.cs` |
| `Services/` | Business logic | `UserService.cs` |
| `Data/` | DbContext, repositories | `AppDbContext.cs` |
| `Middleware/` | Custom middleware | `LoggingMiddleware.cs` |
| `Extensions/` | Extension methods | `ServiceExtensions.cs` |

<ProgressCheckpoint section="project-structure" xpReward={12} />

---

## Section 3: Advanced Project Configuration

### The .csproj File

Defines target framework, dependencies, and build settings:

```xml
<Project Sdk="Microsoft.NET.Sdk.Web">
  <PropertyGroup>
    <TargetFramework>net8.0</TargetFramework>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <RootNamespace>MyCompany.MyApi</RootNamespace>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Microsoft.EntityFrameworkCore.SqlServer" Version="8.0.0" />
    <PackageReference Include="Swashbuckle.AspNetCore" Version="6.5.0" />
  </ItemGroup>
</Project>
```

### launchSettings.json

Controls how the app runs during development:

```json
{
  "$schema": "https://json.schemastore.org/launchsettings.json",
  "profiles": {
    "http": {
      "commandName": "Project",
      "dotnetRunMessages": true,
      "launchBrowser": true,
      "launchUrl": "swagger",
      "applicationUrl": "http://localhost:5000",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    },
    "https": {
      "commandName": "Project",
      "applicationUrl": "https://localhost:5001;http://localhost:5000",
      "environmentVariables": {
        "ASPNETCORE_ENVIRONMENT": "Development"
      }
    }
  }
}
```

### Organizing a Growing Project

As your project grows, consider this structure:

```
MyWebApi/
├── Controllers/
│   ├── UsersController.cs
│   └── ProductsController.cs
├── Models/
│   ├── Dtos/
│   │   ├── UserDto.cs
│   │   └── CreateUserDto.cs
│   └── Entities/
│       └── User.cs
├── Services/
│   ├── IUserService.cs
│   └── UserService.cs
├── Data/
│   ├── AppDbContext.cs
│   └── Repositories/
│       └── UserRepository.cs
├── Middleware/
│   └── ExceptionHandlingMiddleware.cs
├── Extensions/
│   └── ServiceCollectionExtensions.cs
├── Program.cs
└── appsettings.json
```

### Best Practices

<InfoBox type="tip">
**Project Organization Tips:**
- Keep `Program.cs` clean - move service registration to extension methods
- Use folders to group related files
- Follow naming conventions (`*Controller`, `*Service`, `*Repository`)
- Separate DTOs from domain entities
- Use environment-specific config files
</InfoBox>

<ProgressCheckpoint section="project-advanced" xpReward={11} />
